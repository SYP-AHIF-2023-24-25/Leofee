{"version":3,"file":"ngx-scanner-qrcode.mjs","sources":["../../../projects/ngx-scanner-qrcode/src/lib/ngx-scanner-qrcode.default.ts","../../../projects/ngx-scanner-qrcode/src/lib/ngx-scanner-qrcode.helper.ts","../../../projects/ngx-scanner-qrcode/src/lib/ngx-scanner-qrcode.service.ts","../../../projects/ngx-scanner-qrcode/src/lib/ngx-scanner-qrcode.loader.ts","../../../projects/ngx-scanner-qrcode/src/lib/ngx-scanner-qrcode.component.ts","../../../projects/ngx-scanner-qrcode/src/lib/ngx-scanner-qrcode.options.ts","../../../projects/ngx-scanner-qrcode/src/lib/ngx-scanner-qrcode.module.ts","../../../projects/ngx-scanner-qrcode/src/public-api.ts","../../../projects/ngx-scanner-qrcode/src/ngx-scanner-qrcode.ts"],"sourcesContent":["import { ScannerQRCodeConfig } from \"./ngx-scanner-qrcode.options\";\r\n\r\nexport const WASMPROJECT = \"assets/wasm/index.js\";\r\nexport const WASMREMOTE = \"https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@1.6.9/wasm/index.js\";\r\nexport const WASMREMOTELATEST = \"https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@latest/wasm/index.js\";\r\n\r\nexport const BEEP = `data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAABQAAAkAAgICAgICAgICAgICAgICAgICAgKCgoKCgoKCgoKCgoKCgoKCgoKCgwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4ODg4P//////////////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQEUQAAAAAAAAJAk0uXRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAANQAbGeUEQAAHZYZ3fASqD4P5TKBgocg+Bw/8+CAYBA4XB9/4EBAEP4nB9+UOf/6gfUCAIKyjgQ/Kf//wfswAAAwQA/+MYxAYOqrbdkZGQAMA7DJLCsQxNOij///////////+tv///3RWiZGBEhsf/FO/+LoCSFs1dFVS/g8f/4Mhv0nhqAieHleLy/+MYxAYOOrbMAY2gABf/////////////////usPJ66R0wI4boY9/8jQYg//g2SPx1M0N3Z0kVJLIs///Uw4aMyvHJJYmPBYG/+MYxAgPMALBucAQAoGgaBoFQVBUFQWDv6gZBUFQVBUGgaBr5YSgqCoKhIGg7+IQVBUFQVBoGga//SsFSoKnf/iVTEFNRTMu/+MYxAYAAANIAAAAADEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV`;\r\n\r\nexport const MEDIA_STREAM_DEFAULT: MediaStreamConstraints = {\r\n  audio: false,\r\n  video: true\r\n};\r\n\r\nexport const CANVAS_STYLES_LAYER: CanvasRenderingContext2D | any = {\r\n  lineWidth: 1,\r\n  strokeStyle: 'green',\r\n  fillStyle: '#55f02880'\r\n}\r\n\r\nexport const CANVAS_STYLES_TEXT: CanvasRenderingContext2D | any = {\r\n  font: '15px serif',\r\n  strokeStyle: '#fff0',\r\n  fillStyle: '#ff0000'\r\n}\r\n\r\nexport const CONFIG_DEFAULT: ScannerQRCodeConfig = {\r\n  src: '',\r\n  fps: 30,\r\n  vibrate: 300,\r\n  decode: 'utf-8',\r\n  isBeep: true,\r\n  constraints: MEDIA_STREAM_DEFAULT,\r\n  canvasStyles: [CANVAS_STYLES_LAYER, CANVAS_STYLES_TEXT]\r\n};","import { AsyncSubject } from \"rxjs\";\r\nimport { BEEP, CANVAS_STYLES_LAYER, CANVAS_STYLES_TEXT, CONFIG_DEFAULT } from \"./ngx-scanner-qrcode.default\";\r\nimport { ScannerQRCodeConfig, ScannerQRCodeSelectedFiles } from \"./ngx-scanner-qrcode.options\";\r\ndeclare var zbarWasm: any;\r\n\r\n/**\r\n * WASM_READY\r\n * @returns \r\n */\r\nexport var WASM_READY = () => ('zbarWasm' in window);\r\n\r\n/**\r\n * OVERRIDES\r\n * @param variableKey \r\n * @param config \r\n * @param defaultConfig \r\n * @returns \r\n */\r\nexport const OVERRIDES = (variableKey: string, config: any, defaultConfig: any) => {\r\n  if (config && Object.keys(config[variableKey]).length) {\r\n    for (const key in defaultConfig) {\r\n      const cloneDeep = JSON.parse(JSON.stringify({ ...config[variableKey], ...{ [key]: (defaultConfig as any)[key] } }));\r\n      config[variableKey] = config[variableKey].hasOwnProperty(key) ? config[variableKey] : cloneDeep;\r\n    }\r\n    return config[variableKey];\r\n  } else {\r\n    return defaultConfig;\r\n  }\r\n};\r\n\r\n/**\r\n * AS_COMPLETE\r\n * @param as \r\n * @param data \r\n * @param error \r\n */\r\nexport const AS_COMPLETE = (as: AsyncSubject<any>, data: any, error?: any) => {\r\n  error ? as.error(error) : as.next(data);\r\n  as.complete();\r\n};\r\n\r\n/**\r\n * PLAY_AUDIO\r\n * @param isPlay \r\n * @returns \r\n */\r\nexport const PLAY_AUDIO = (isPlay: boolean = false) => {\r\n  if (isPlay === false) return;\r\n  const audio = new Audio(BEEP);\r\n  // when the sound has been loaded, execute your code\r\n  audio.oncanplaythrough = () => {\r\n    const promise = audio.play();\r\n    if (promise) {\r\n      promise.catch((e) => {\r\n        if (e.name === \"NotAllowedError\" || e.name === \"NotSupportedError\") {\r\n          // console.log(e.name);\r\n        }\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * DRAW_RESULT_APPEND_CHILD\r\n * @param code \r\n * @param oriCanvas \r\n * @param elTarget \r\n * @param canvasStyles \r\n */\r\nexport const DRAW_RESULT_APPEND_CHILD = (code: any[], oriCanvas: HTMLCanvasElement, elTarget: HTMLCanvasElement | HTMLDivElement, canvasStyles: CanvasRenderingContext2D[]) => {\r\n  let widthZoom;\r\n  let heightZoom;\r\n  let oriWidth = oriCanvas.width;\r\n  let oriHeight = oriCanvas.height;\r\n  let oriWHRatio = oriWidth / oriHeight;\r\n  let imgWidth = parseInt(getComputedStyle(oriCanvas).width);\r\n  let imgHeight = parseInt(getComputedStyle(oriCanvas).height);\r\n  let imgWHRatio = imgWidth / imgHeight;\r\n  elTarget.innerHTML = '';\r\n\r\n  if (oriWHRatio > imgWHRatio) {\r\n    widthZoom = imgWidth / oriWidth;\r\n    heightZoom = imgWidth / oriWHRatio / oriHeight;\r\n  } else {\r\n    heightZoom = imgHeight / oriHeight;\r\n    widthZoom = (imgHeight * oriWHRatio) / oriWidth;\r\n  }\r\n\r\n  for (let i = 0; i < code.length; i++) {\r\n    const _code = code[i];\r\n    // New canvas\r\n    let cvs = document.createElement(\"canvas\");\r\n    let ctx = cvs.getContext('2d', { willReadFrequently: true }) as CanvasRenderingContext2D;\r\n    let loc: any = {};\r\n    let X: any = [];\r\n    let Y: any = [];\r\n    let fontSize = 0;\r\n    let svgSize = 0;\r\n\r\n    let num = canvasStyles.length === 2 && canvasStyles[1]?.font?.replace(/[^0-9]/g, '');\r\n    if (num && /[0-9]/g.test(num)) {\r\n      fontSize = parseFloat(num);\r\n      svgSize = (widthZoom || 1) * fontSize;\r\n      if (Number.isNaN(svgSize)) {\r\n        svgSize = fontSize;\r\n      }\r\n    }\r\n\r\n    // Point x,y\r\n    const points = _code.points;\r\n    for (let j = 0; j < points.length; j++) {\r\n      const xj = points?.[j]?.x ?? 0;\r\n      const yj = points?.[j]?.y ?? 0;\r\n      loc[`x${j + 1}`] = xj;\r\n      loc[`y${j + 1}`] = yj;\r\n      X.push(xj);\r\n      Y.push(yj);\r\n    }\r\n\r\n    // Min max\r\n    let maxX = Math.max(...X);\r\n    let minX = Math.min(...X);\r\n    let maxY = Math.max(...Y);\r\n    let minY = Math.min(...Y);\r\n\r\n    // Add class\r\n    cvs.setAttribute('class', 'qrcode-polygon');\r\n\r\n    // Size with screen zoom\r\n    if (oriWHRatio > imgWHRatio) {\r\n      cvs.style.top = minY * heightZoom + (imgHeight - imgWidth / oriWHRatio) * 0.5 + \"px\";\r\n      cvs.style.left = minX * widthZoom + \"px\";\r\n      cvs.width = (maxX - minX) * widthZoom;\r\n      cvs.height = (maxY - minY) * widthZoom;\r\n    } else {\r\n      cvs.style.top = minY * heightZoom + \"px\";\r\n      cvs.style.left = minX * widthZoom + (imgWidth - imgHeight * oriWHRatio) * 0.5 + \"px\";\r\n      cvs.width = (maxX - minX) * heightZoom;\r\n      cvs.height = (maxY - minY) * heightZoom;\r\n    }\r\n\r\n    // Style for canvas\r\n    for (const key in canvasStyles[0]) {\r\n      (ctx as any)[key] = (canvasStyles[0] as any)[key];\r\n    }\r\n\r\n    // polygon [x,y, x,y, x,y.....];\r\n    const polygon = [];\r\n    for (let k = 0; k < X.length; k++) {\r\n      polygon.push((loc[`x${k + 1}`] - minX) * heightZoom);\r\n      polygon.push((loc[`y${k + 1}`] - minY) * widthZoom);\r\n    }\r\n\r\n    // Copy array\r\n    const shape = polygon.slice(0) as any;\r\n\r\n    // Draw polygon\r\n    ctx.beginPath();\r\n    ctx.moveTo(shape.shift(), shape.shift());\r\n    while (shape.length) {\r\n      ctx.lineTo(shape.shift(), shape.shift()); //x,y\r\n    }\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    ctx.stroke();\r\n\r\n    if (fontSize) {\r\n      // Tooltip result\r\n      const qrcodeTooltipTemp = document.createElement('div');\r\n      qrcodeTooltipTemp.setAttribute('class', 'qrcode-tooltip-temp');\r\n      qrcodeTooltipTemp.innerText = _code.value;\r\n      qrcodeTooltipTemp.style.maxWidth = ((oriWidth > window.innerWidth) ? window.innerWidth * 0.9 : oriWidth) + \"px\";\r\n      qrcodeTooltipTemp.style.borderRadius = `clamp(1px, ${(widthZoom * fontSize) - 10}px, 3px)`;\r\n      qrcodeTooltipTemp.style.paddingBlock = `clamp(1px, ${(widthZoom * fontSize) - 10}px, 3px)`; // top - bottom\r\n      qrcodeTooltipTemp.style.paddingInline = `clamp(2.5px, ${(widthZoom * fontSize) - 6}px, 10px)`; // left - right\r\n      const xmlString = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${svgSize}\" height=\"${svgSize}\" viewBox=\"0 0 512 512\"><rect x=\"128\" y=\"128\" width=\"336\" height=\"336\" rx=\"57\" ry=\"57\"></rect><path d=\"M383.5,128l.5-24a56.16,56.16,0,0,0-56-56H112a64.19,64.19,0,0,0-64,64V328a56.16,56.16,0,0,0,56,56h24\"></path></svg>`;\r\n      const xmlDom = new DOMParser().parseFromString(xmlString, 'application/xml');\r\n      const svgDom = qrcodeTooltipTemp.ownerDocument.importNode(xmlDom.documentElement, true);\r\n      svgDom.style.marginLeft = `clamp(1px, ${(widthZoom * fontSize) - 10}px, 3px)`; // left - right\r\n      qrcodeTooltipTemp.appendChild(svgDom);\r\n      svgDom.addEventListener(\"click\", () => window.navigator['clipboard'].writeText(_code.value));\r\n      qrcodeTooltipTemp.addEventListener(\"click\", () => window.navigator['clipboard'].writeText(_code.value));\r\n\r\n      // Tooltip box\r\n      const qrcodeTooltip = document.createElement('div');\r\n      qrcodeTooltip.setAttribute('class', 'qrcode-tooltip');\r\n      qrcodeTooltip.appendChild(qrcodeTooltipTemp);\r\n      heightZoom = imgHeight / oriHeight;\r\n      widthZoom = (imgHeight * oriWHRatio) / oriWidth;\r\n      qrcodeTooltip.style.fontSize = widthZoom * fontSize + 'px';\r\n      qrcodeTooltip.style.top = minY * heightZoom + \"px\";\r\n      qrcodeTooltip.style.left = minX * widthZoom + (imgWidth - imgHeight * oriWHRatio) * 0.5 + \"px\";\r\n      qrcodeTooltip.style.width = (maxX - minX) * heightZoom + \"px\";\r\n      qrcodeTooltip.style.height = (maxY - minY) * heightZoom + \"px\";\r\n\r\n      // Result text\r\n      const resultText = document.createElement('span');\r\n      resultText.innerText = _code.value;\r\n\r\n      // Set position result text\r\n      resultText.style.top = minY * heightZoom + (-20 * heightZoom) + \"px\";\r\n      resultText.style.left = minX * widthZoom + (imgWidth - imgHeight * oriWHRatio) * 0.5 + \"px\";\r\n\r\n      // Style text\r\n      const ff = canvasStyles[1]?.font?.split(' ')?.[1];\r\n      resultText.style.fontFamily = ff;\r\n      resultText.style.fontSize = widthZoom * fontSize + 'px';\r\n      resultText.style.color = canvasStyles?.[1]?.fillStyle as string;\r\n\r\n      elTarget?.appendChild(qrcodeTooltip);\r\n      elTarget?.appendChild(resultText);\r\n    }\r\n\r\n    elTarget?.appendChild(cvs);\r\n  };\r\n\r\n}\r\n\r\n/**\r\n * DRAW_RESULT_ON_CANVAS\r\n * @param code \r\n * @param cvs \r\n * @param canvasStyles \r\n */\r\nexport const DRAW_RESULT_ON_CANVAS = (code: any[], cvs: HTMLCanvasElement, canvasStyles: CanvasRenderingContext2D[]) => {\r\n  let ctx = cvs.getContext('2d', { willReadFrequently: true }) as CanvasRenderingContext2D;\r\n\r\n  for (let i = 0; i < code.length; i++) {\r\n    const _code = code[i];\r\n    let loc: any = {};\r\n    let X: any = [];\r\n    let Y: any = [];\r\n    let fontSize = 0;\r\n\r\n    const fs = canvasStyles[1]?.font?.split(' ')?.[0];\r\n    let num = fs?.replace(/[^0-9]/g, '');\r\n    if (num && /[0-9]/g.test(num)) {\r\n      fontSize = parseFloat(num);\r\n    }\r\n\r\n    // Point x,y\r\n    const points = _code.points;\r\n    for (let j = 0; j < points.length; j++) {\r\n      const xj = points?.[j]?.x ?? 0;\r\n      const yj = points?.[j]?.y ?? 0;\r\n      loc[`x${j + 1}`] = xj;\r\n      loc[`y${j + 1}`] = yj;\r\n      X.push(xj);\r\n      Y.push(yj);\r\n    }\r\n\r\n    // Min max\r\n    let minX = Math.min(...X);\r\n    let minY = Math.min(...Y);\r\n\r\n    const styleLayer = () => {\r\n      for (const key in canvasStyles[0]) {\r\n        (ctx as any)[key] = (canvasStyles[0] as any)[key];\r\n      }\r\n\r\n      // polygon [x,y, x,y, x,y.....];\r\n      const polygon = [];\r\n      for (let k = 0; k < X.length; k++) {\r\n        polygon.push(loc[`x${k + 1}`]);\r\n        polygon.push(loc[`y${k + 1}`]);\r\n      }\r\n\r\n      // Copy array\r\n      const shape = polygon.slice(0) as any;\r\n\r\n      // Draw polygon\r\n      ctx.beginPath();\r\n      ctx.moveTo(shape.shift(), shape.shift());\r\n      while (shape.length) {\r\n        ctx.lineTo(shape.shift(), shape.shift()); //x,y\r\n      }\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      ctx.stroke();\r\n    }\r\n\r\n    let cvs2 = document.createElement('canvas');\r\n    const styleText = () => {\r\n      const ff = canvasStyles[1]?.font?.split(' ')?.[1];\r\n      cvs2.height = cvs.height;\r\n      cvs2.width = cvs.width;\r\n      let ctx2 = cvs2.getContext('2d', { willReadFrequently: true }) as CanvasRenderingContext2D;\r\n      ctx2.font = fontSize + `px ` + ff;\r\n      for (const key in canvasStyles[1]) {\r\n        (ctx2 as any)[key] = (canvasStyles[1] as any)[key];\r\n      }\r\n      FILL_TEXT_MULTI_LINE(ctx2, _code.value, minX, minY - 5);\r\n    }\r\n\r\n    styleLayer();\r\n    styleText();\r\n    // Merge cvs2 into cvs\r\n    ctx.drawImage(cvs2, 0, 0);\r\n  };\r\n}\r\n\r\n/**\r\n * READ_AS_DATA_URL\r\n * @param file \r\n * @param configs \r\n * @returns \r\n */\r\nexport const READ_AS_DATA_URL = (file: File, configs: ScannerQRCodeConfig): Promise<ScannerQRCodeSelectedFiles> => {\r\n  /** overrides **/\r\n  let decode = configs?.decode ?? CONFIG_DEFAULT.decode;\r\n  let canvasStyles = configs?.canvasStyles?.length === 2 ? configs?.canvasStyles : [CANVAS_STYLES_LAYER, CANVAS_STYLES_TEXT];\r\n  let isBeep = configs?.isBeep ?? CONFIG_DEFAULT.isBeep;\r\n\r\n  /** drawImage **/\r\n  return new Promise((resolve, reject) => {\r\n    const fileReader = new FileReader();\r\n    fileReader.onload = () => {\r\n      const objectFile = {\r\n        name: file.name,\r\n        file: file,\r\n        url: URL.createObjectURL(file)\r\n      };\r\n      // Set the src of this Image object.\r\n      const image = new Image();\r\n      // Setting cross origin value to anonymous\r\n      image.setAttribute('crossOrigin', 'anonymous');\r\n      // When our image has loaded.\r\n      image.onload = async () => {\r\n        // Get the canvas element by using the getElementById method.\r\n        const canvas = document.createElement('canvas');\r\n        // HTMLImageElement size\r\n        canvas.width = image.naturalWidth || image.width;\r\n        canvas.height = image.naturalHeight || image.height;\r\n        // Get a 2D drawing context for the canvas.\r\n        const ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\r\n        // Draw image\r\n        ctx.drawImage(image, 0, 0, canvas.width, canvas.height);\r\n        // Data image\r\n        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n        // Scanner\r\n        if (WASM_READY()) {\r\n          const code = await zbarWasm.scanImageData(imageData);\r\n          if (code?.length) {\r\n            // Decode\r\n            code.forEach((s: any) => s.value = s.decode(decode?.toLocaleLowerCase()));\r\n\r\n            // Overlay\r\n            DRAW_RESULT_ON_CANVAS(code, canvas, canvasStyles);\r\n\r\n            // Emit object\r\n            const blob = await CANVAS_TO_BLOB(canvas);\r\n            const url = URL.createObjectURL(blob);\r\n            const blobToFile = (theBlob: any, fileName: string) => new File([theBlob], fileName, { lastModified: new Date().getTime(), type: theBlob.type });\r\n            resolve(Object.assign({}, objectFile, { data: code, url: url, canvas: canvas, file: blobToFile(blob, objectFile.name) }));\r\n\r\n            PLAY_AUDIO(isBeep);\r\n          } else {\r\n            resolve(Object.assign({}, objectFile, { data: code, canvas: canvas }));\r\n          }\r\n        }\r\n      };\r\n      // Set src\r\n      image.src = objectFile.url;\r\n    }\r\n    fileReader.onerror = (error: any) => reject(error);\r\n    fileReader.readAsDataURL(file);\r\n  })\r\n}\r\n\r\n/**\r\n * Convert canvas to blob\r\n * canvas.toBlob((blob) => { .. }, 'image/jpeg', 0.95); // JPEG at 95% quality\r\n * @param canvas \r\n * @param type \r\n * @returns \r\n */\r\nexport const CANVAS_TO_BLOB = (canvas: HTMLCanvasElement, type?: string): Promise<any> => {\r\n  return new Promise((resolve, reject) => canvas.toBlob(blob => resolve(blob), type));\r\n}\r\n\r\n/**\r\n * Convert blob to file\r\n * @param theBlob \r\n * @param fileName \r\n * @returns \r\n */\r\nexport const BLOB_TO_FILE = (theBlob: any, fileName: string): File => {\r\n  return new File([theBlob], fileName, { lastModified: new Date().getTime(), type: theBlob.type });\r\n}\r\n\r\n/**\r\n * FILES_TO_SCAN\r\n * @param files \r\n * @param configs \r\n * @param percentage \r\n * @param quality \r\n * @param as \r\n * @returns \r\n */\r\nexport const FILES_TO_SCAN = (files: File[] = [], configs: ScannerQRCodeConfig, percentage?: number, quality?: number, as = new AsyncSubject<ScannerQRCodeSelectedFiles[]>()): AsyncSubject<ScannerQRCodeSelectedFiles[]> => {\r\n  COMPRESS_IMAGE_FILE(files, percentage, quality).then((_files: File[]) => {\r\n    Promise.all(Object.assign([], _files).map((m: File) => READ_AS_DATA_URL(m, configs))).then((img: ScannerQRCodeSelectedFiles[]) => {\r\n      AS_COMPLETE(as, img);\r\n    }).catch((error: any) => AS_COMPLETE(as, null, error));\r\n  });\r\n  return as;\r\n}\r\n\r\n/**\r\n * FILL_TEXT_MULTI_LINE\r\n * @param ctx \r\n * @param text \r\n * @param x \r\n * @param y \r\n */\r\nexport const FILL_TEXT_MULTI_LINE = (ctx: CanvasRenderingContext2D, text: string, x: number, y: number) => {\r\n  let lineHeight = ctx.measureText(\"M\").width * 1.2;\r\n  let lines = text.split(\"\\n\");\r\n  for (var i = 0; i < lines.length; ++i) {\r\n    ctx.fillText(lines[i], x, y);\r\n    ctx.strokeText(lines[i], x, y);\r\n    y += lineHeight;\r\n  }\r\n}\r\n\r\n/**\r\n * COMPRESS_IMAGE_FILE\r\n * @param files \r\n * @param percentage \r\n * @param quality \r\n * @returns \r\n */\r\nexport const COMPRESS_IMAGE_FILE = (files: File[] = [], percentage = 100, quality = 100) => {\r\n  if (files.length && (percentage < 100 || quality < 100)) {\r\n    // Have files\r\n    const resizedFiles: File[] = [];\r\n    return new Promise<File[]>((resolve, reject) => {\r\n      for (const file of files) {\r\n        const image = new Image() as HTMLImageElement;\r\n        const reader = new FileReader();\r\n        reader.onload = function (event: any) {\r\n          image.onload = function () {\r\n            const canvas = document.createElement('canvas');\r\n            const ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\r\n            const newWidth = Math.round(image.width * (percentage / 100));\r\n            const newHeight = Math.round(image.height * (percentage / 100));\r\n            canvas.width = newWidth;\r\n            canvas.height = newHeight;\r\n            ctx.drawImage(image, 0, 0, newWidth, newHeight);\r\n            canvas.toBlob((blob: any) => {\r\n              const resizedFile = new File([blob], file.name, { type: file.type });\r\n              resizedFiles.push(resizedFile);\r\n              if (files.length === resizedFiles.length) {\r\n                resolve(resizedFiles);\r\n              }\r\n            }, file.type, quality / 100);\r\n          };\r\n          image.src = event.target.result;\r\n        };\r\n        reader.onerror = (error: any) => reject(error);\r\n        reader.readAsDataURL(file);\r\n      }\r\n    });\r\n  } else {\r\n    // No files selected\r\n    return Promise.resolve<File[]>(files);\r\n  }\r\n}\r\n\r\n/**\r\n * REMOVE_RESULT_PANEL\r\n * @param element \r\n */\r\nexport const REMOVE_RESULT_PANEL = (element: HTMLElement) => {\r\n  // clear text result and tooltip\r\n  Object.assign([], element.childNodes).forEach(el => element.removeChild(el));\r\n}\r\n\r\n/**\r\n * RESET_CANVAS\r\n * @param canvas \r\n */\r\nexport const RESET_CANVAS = (canvas: HTMLCanvasElement) => {\r\n  // reset canvas\r\n  const context = canvas.getContext('2d', { willReadFrequently: true }) as CanvasRenderingContext2D;\r\n  // clear frame when reloop\r\n  context.clearRect(0, 0, canvas.width, canvas.height);\r\n}\r\n\r\n/**\r\n * UPDATE_WIDTH_HEIGHT_VIDEO\r\n * @param video \r\n * @param canvas \r\n */\r\nexport const UPDATE_WIDTH_HEIGHT_VIDEO = (video: HTMLVideoElement, canvas: HTMLCanvasElement): void => {\r\n  video.style.width = canvas.offsetWidth + 'px';\r\n  video.style.height = canvas.offsetHeight + 'px';\r\n}\r\n\r\n/**\r\n * VIBRATE\r\n * @param time \r\n */\r\nexport const VIBRATE = (time: number = 300) => {\r\n  time && IS_MOBILE() && window?.navigator?.vibrate(time);\r\n};\r\n\r\n/**\r\n * IS_MOBILE\r\n * @returns \r\n */\r\nexport const IS_MOBILE = () => {\r\n  const vendor = navigator.userAgent || navigator['vendor'] || (window as any)['opera'];\r\n  const phone = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i;\r\n  const version = /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i;\r\n  const isSafari = /^((?!chrome|android).)*safari/i;\r\n  return !!(phone.test(vendor) || version.test(vendor.substr(0, 4))) && !isSafari.test(vendor);\r\n};\r\n","import { Injectable } from '@angular/core';\r\nimport { AsyncSubject } from 'rxjs';\r\nimport { AS_COMPLETE, COMPRESS_IMAGE_FILE, FILES_TO_SCAN } from './ngx-scanner-qrcode.helper';\r\nimport { ScannerQRCodeConfig, ScannerQRCodeSelectedFiles } from './ngx-scanner-qrcode.options';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NgxScannerQrcodeService {\r\n\r\n  /**\r\n   * loadFiles\r\n   * @param files \r\n   * @param percentage \r\n   * @param quality \r\n   * @returns \r\n   */\r\n  public loadFiles(files: File[] = [], percentage?: number, quality?: number): AsyncSubject<ScannerQRCodeSelectedFiles[]> {\r\n    const as = new AsyncSubject<ScannerQRCodeSelectedFiles[]>();\r\n    COMPRESS_IMAGE_FILE(files, percentage, quality).then((_files: File[]) => {\r\n      Promise.all(Object.assign([], _files).map((m: File) => this.readAsDataURL(m))).then((img: ScannerQRCodeSelectedFiles[]) => AS_COMPLETE(as, img)).catch((error: any) => AS_COMPLETE(as, null, error));\r\n    });\r\n    return as;\r\n  }\r\n\r\n  /**\r\n   * loadFilesToScan\r\n   * @param files \r\n   * @param config \r\n   * @param percentage \r\n   * @param quality \r\n   * @returns \r\n   */\r\n  public loadFilesToScan(files: File[] = [], config: ScannerQRCodeConfig, percentage?: number, quality?: number): AsyncSubject<ScannerQRCodeSelectedFiles[]> {\r\n    return FILES_TO_SCAN(files, config, percentage, quality);\r\n  }\r\n\r\n  /**\r\n   * readAsDataURL\r\n   * @param file \r\n   * @returns \r\n   */\r\n  private readAsDataURL(file: File): Promise<ScannerQRCodeSelectedFiles> {\r\n    /** drawImage **/\r\n    return new Promise((resolve, reject) => {\r\n      const fileReader = new FileReader();\r\n      fileReader.onload = () => {\r\n        const objectFile = {\r\n          name: file.name,\r\n          file: file,\r\n          url: URL.createObjectURL(file)\r\n        };\r\n        resolve(objectFile);\r\n      }\r\n      fileReader.onerror = (error: any) => reject(error);\r\n      fileReader.readAsDataURL(file);\r\n    })\r\n  }\r\n}","import { AsyncSubject } from \"rxjs\";\r\nimport { AS_COMPLETE, WASM_READY } from \"./ngx-scanner-qrcode.helper\";\r\nimport { Renderer2 } from \"@angular/core\";\r\nimport { WASMPROJECT, WASMREMOTE, WASMREMOTELATEST } from \"./ngx-scanner-qrcode.default\";\r\n\r\n/**\r\n * LOAD_WASM\r\n * @param as \r\n * @param renderer \r\n * @returns \r\n */\r\nexport const LOAD_WASM = (as: AsyncSubject<boolean | any> = new AsyncSubject(), renderer?: Renderer2): AsyncSubject<boolean | any> => {\r\n    let retry = 0;\r\n    const LOAD_WASM_RETRY = (isLoadWasmRemote = false) => {\r\n        const DONE = () => {\r\n            let timeoutId: any;\r\n            try {\r\n                const L = () => {\r\n                    clearTimeout(timeoutId);\r\n                    WASM_READY() ? setTimeout(() => AS_COMPLETE(as, true)) : timeoutId = setTimeout(() => L());\r\n                }\r\n                setTimeout(() => L());\r\n                setTimeout(() => clearTimeout(timeoutId), 3000);\r\n            } catch (error) {\r\n                clearTimeout(timeoutId);\r\n            }\r\n        }\r\n        const scriptRemote = (document.querySelectorAll(`script[src=\"${WASMREMOTE}\"]`) as any as Array<HTMLElement>);\r\n        const scriptRemoteLatest = (document.querySelectorAll(`script[src=\"${WASMREMOTELATEST}\"]`) as any as Array<HTMLElement>);\r\n        if (scriptRemote.length || scriptRemoteLatest.length) {\r\n            DONE();\r\n        } else {\r\n            const scriptProject = (document.querySelectorAll(`script[src=\"${WASMPROJECT}\"]`) as any as Array<HTMLElement>);\r\n            if (scriptProject.length === 1) {\r\n                DONE();\r\n            } else {\r\n                scriptProject.forEach(f => f.remove());\r\n                if (renderer) {\r\n                    const script = renderer.createElement(\"script\") as HTMLScriptElement;\r\n                    renderer.setAttribute(script, \"src\", isLoadWasmRemote ? WASMREMOTE : WASMPROJECT);\r\n                    renderer.setAttribute(script, \"type\", \"text/javascript\");\r\n                    renderer.setAttribute(script, \"async\", \"\");\r\n                    renderer.appendChild(document.head, script);\r\n                    script.onload = () => DONE();\r\n                    script.onerror = () => {\r\n                        if (retry < 2) {\r\n                            document.head.removeChild(script);\r\n                            LOAD_WASM_RETRY(true);\r\n                        } else {\r\n                            AS_COMPLETE(as, false, 'Could not load script ' + isLoadWasmRemote ? WASMREMOTE : WASMPROJECT);\r\n                        }\r\n                    }\r\n                    retry += 1;\r\n                } else {\r\n                    const mod = document.createElement('script');\r\n                    mod.setAttribute(\"src\", isLoadWasmRemote ? WASMREMOTE : WASMPROJECT);\r\n                    mod.setAttribute(\"type\", \"text/javascript\");\r\n                    mod.setAttribute(\"async\", \"\");\r\n                    document.head.appendChild(mod);\r\n                    mod.onload = () => DONE();\r\n                    mod.onerror = () => {\r\n                        if (retry < 2) {\r\n                            document.head.removeChild(mod);\r\n                            LOAD_WASM_RETRY(true);\r\n                        } else {\r\n                            AS_COMPLETE(as, false, 'Could not load script ' + isLoadWasmRemote ? WASMREMOTE : WASMPROJECT);\r\n                        }\r\n                    }\r\n                    retry += 1;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    LOAD_WASM_RETRY();\r\n    return as;\r\n}","import { Component, ElementRef, EventEmitter, OnDestroy, OnInit, Renderer2, ViewChild, ViewEncapsulation } from '@angular/core';\r\nimport { AsyncSubject, BehaviorSubject } from 'rxjs';\r\nimport { CANVAS_STYLES_LAYER, CANVAS_STYLES_TEXT, CONFIG_DEFAULT, MEDIA_STREAM_DEFAULT } from './ngx-scanner-qrcode.default';\r\nimport { AS_COMPLETE, BLOB_TO_FILE, CANVAS_TO_BLOB, DRAW_RESULT_APPEND_CHILD, FILES_TO_SCAN, OVERRIDES, PLAY_AUDIO, REMOVE_RESULT_PANEL, RESET_CANVAS, UPDATE_WIDTH_HEIGHT_VIDEO, VIBRATE, WASM_READY } from './ngx-scanner-qrcode.helper';\r\nimport { LOAD_WASM } from './ngx-scanner-qrcode.loader';\r\nimport { ScannerQRCodeConfig, ScannerQRCodeDevice, ScannerQRCodeResult, ScannerQRCodeSelectedFiles } from './ngx-scanner-qrcode.options';\r\ndeclare var zbarWasm: any;\r\n\r\n@Component({\r\n  selector: 'ngx-scanner-qrcode',\r\n  template: `<div #resultsPanel class=\"origin-overlay\"></div><canvas #canvas class=\"origin-canvas\"></canvas><video #video playsinline class=\"origin-video\"></video>`,\r\n  styleUrls: ['./ngx-scanner-qrcode.component.scss'],\r\n  host: { 'class': 'ngx-scanner-qrcode' },\r\n  exportAs: 'scanner',\r\n  inputs: ['src', 'fps', 'vibrate', 'decode', 'isBeep', 'config', 'constraints', 'canvasStyles'],\r\n  outputs: ['event'],\r\n  queries: {\r\n    video: new ViewChild('video'),\r\n    canvas: new ViewChild('canvas'),\r\n    resultsPanel: new ViewChild('resultsPanel')\r\n  },\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class NgxScannerQrcodeComponent implements OnInit, OnDestroy {\r\n\r\n  /**\r\n   * Element\r\n   * playsinline required to tell iOS safari we don't want fullscreen\r\n   */\r\n  public video!: ElementRef<HTMLVideoElement>;\r\n  public canvas!: ElementRef<HTMLCanvasElement>;\r\n  public resultsPanel!: ElementRef<HTMLDivElement>;\r\n\r\n  /**\r\n   * EventEmitter\r\n   */\r\n  public event = new EventEmitter<ScannerQRCodeResult[]>();\r\n\r\n  /**\r\n   * Input\r\n   */\r\n  public src: string | undefined = CONFIG_DEFAULT.src;\r\n  public fps: number | undefined = CONFIG_DEFAULT.fps;\r\n  public vibrate: number | undefined = CONFIG_DEFAULT.vibrate;\r\n  public decode: string | undefined = CONFIG_DEFAULT.decode;\r\n  public isBeep: boolean | undefined = CONFIG_DEFAULT.isBeep;\r\n  public config: ScannerQRCodeConfig = CONFIG_DEFAULT;\r\n  public constraints: MediaStreamConstraints | any = CONFIG_DEFAULT.constraints;\r\n  public canvasStyles: CanvasRenderingContext2D[] | any[] = [CANVAS_STYLES_LAYER, CANVAS_STYLES_TEXT];\r\n\r\n  /**\r\n   * Export\r\n  */\r\n  public isStart: boolean = false;\r\n  public isPause: boolean = false;\r\n  public isLoading: boolean = false;\r\n  public isTorch: boolean = false;\r\n  public data = new BehaviorSubject<ScannerQRCodeResult[]>([]);\r\n  public devices = new BehaviorSubject<ScannerQRCodeDevice[]>([]);\r\n  public deviceIndexActive: number = 0;\r\n\r\n  /**\r\n   * Private\r\n  */\r\n  private rAF_ID: any;\r\n  private dataForResize: ScannerQRCodeResult[] = [];\r\n  private ready = new AsyncSubject<boolean>();\r\n\r\n  private STATUS = {\r\n    startON: () => this.isStart = true,\r\n    pauseON: () => this.isPause = true,\r\n    loadingON: () => this.isLoading = true,\r\n    startOFF: () => this.isStart = false,\r\n    pauseOFF: () => this.isPause = false,\r\n    loadingOFF: () => this.isLoading = false,\r\n    torchOFF: () => this.isTorch = false,\r\n  }\r\n\r\n  constructor(private renderer: Renderer2, private elementRef: ElementRef) { }\r\n\r\n  ngOnInit(): void {\r\n    this.overrideConfig();\r\n    LOAD_WASM(this.ready, this.renderer).subscribe(() => {\r\n      if (this.src) {\r\n        this.loadImage(this.src);\r\n      }\r\n      this.resize();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * start\r\n   * @param playDeviceCustom \r\n   * @returns \r\n   */\r\n  public start(playDeviceCustom?: Function): AsyncSubject<any> {\r\n    const as = new AsyncSubject<any>();\r\n    if (this.isStart) {\r\n      // Reject\r\n      AS_COMPLETE(as, false);\r\n    } else {\r\n      // fix safari\r\n      this.safariWebRTC(as, playDeviceCustom);\r\n    }\r\n    return as;\r\n  }\r\n\r\n  /**\r\n   * stop\r\n   * @returns \r\n   */\r\n  public stop(): AsyncSubject<any> {\r\n    this.STATUS.pauseOFF();\r\n    this.STATUS.startOFF();\r\n    this.STATUS.torchOFF();\r\n    this.STATUS.loadingOFF();\r\n    const as = new AsyncSubject<any>();\r\n    try {\r\n      clearTimeout(this.rAF_ID);\r\n      (this.video.nativeElement.srcObject as MediaStream).getTracks().forEach((track: MediaStreamTrack) => {\r\n        track.stop();\r\n        AS_COMPLETE(as, true);\r\n      });\r\n      this.dataForResize = [];\r\n      RESET_CANVAS(this.canvas.nativeElement);\r\n      REMOVE_RESULT_PANEL(this.resultsPanel.nativeElement);\r\n    } catch (error) {\r\n      AS_COMPLETE(as, false, error as any);\r\n    }\r\n    return as;\r\n  }\r\n\r\n  /**\r\n   * play\r\n   * @returns \r\n   */\r\n  public play(): AsyncSubject<any> {\r\n    const as = new AsyncSubject<any>();\r\n    if (this.isPause) {\r\n      this.video.nativeElement.play();\r\n      this.STATUS.pauseOFF();\r\n      this.requestAnimationFrame();\r\n      AS_COMPLETE(as, true);\r\n    } else {\r\n      AS_COMPLETE(as, false);\r\n    }\r\n    return as;\r\n  }\r\n\r\n  /**\r\n   * pause\r\n   * @returns \r\n   */\r\n  public pause(): AsyncSubject<any> {\r\n    const as = new AsyncSubject<any>();\r\n    if (this.isStart) {\r\n      clearTimeout(this.rAF_ID);\r\n      this.video.nativeElement.pause();\r\n      this.STATUS.pauseON();\r\n      AS_COMPLETE(as, true);\r\n    } else {\r\n      AS_COMPLETE(as, false);\r\n    }\r\n    return as;\r\n  }\r\n\r\n  /**\r\n   * playDevice\r\n   * @param deviceId \r\n   * @param as \r\n   * @returns \r\n   */\r\n  public playDevice(deviceId: string, as: AsyncSubject<any> = new AsyncSubject<any>()): AsyncSubject<any> {\r\n    const constraints = this.getConstraints();\r\n    const existDeviceId = (this.isStart && constraints) ? constraints.deviceId !== deviceId : true;\r\n    switch (true) {\r\n      case deviceId === 'null' || deviceId === 'undefined' || !deviceId:\r\n        stop();\r\n        this.stop();\r\n        AS_COMPLETE(as, false);\r\n        break;\r\n      case deviceId && existDeviceId:\r\n        stop();\r\n        this.stop();\r\n        // Loading on\r\n        this.STATUS.loadingON();\r\n        this.deviceIndexActive = this.devices.value.findIndex((f: ScannerQRCodeDevice) => f.deviceId === deviceId);\r\n        const constraints = { ...this.constraints, audio: false, video: { deviceId: deviceId, ...this.constraints.video } };\r\n        // MediaStream\r\n        navigator.mediaDevices.getUserMedia(constraints).then((stream: MediaStream) => {\r\n          this.video.nativeElement.srcObject = stream;\r\n          this.video.nativeElement.onloadedmetadata = () => {\r\n            this.video.nativeElement.play();\r\n            this.requestAnimationFrame();\r\n            AS_COMPLETE(as, true);\r\n            this.STATUS.startON();\r\n            this.STATUS.loadingOFF();\r\n          }\r\n        }).catch((error: any) => {\r\n          this.eventEmit(false);\r\n          AS_COMPLETE(as, false, error);\r\n          this.STATUS.startOFF();\r\n          this.STATUS.loadingOFF();\r\n        });\r\n        break;\r\n      default:\r\n        AS_COMPLETE(as, false);\r\n        this.STATUS.loadingOFF();\r\n        break;\r\n    }\r\n    return as;\r\n  }\r\n\r\n  /**\r\n   * loadImage\r\n   * @param src \r\n   * @returns \r\n   */\r\n  public loadImage(src: string): AsyncSubject<any> {\r\n    const as = new AsyncSubject<any>();\r\n    // Loading on\r\n    this.STATUS.startOFF();\r\n    this.STATUS.loadingON();\r\n    // Set the src of this Image object.\r\n    const image = new Image();\r\n    // Setting cross origin value to anonymous\r\n    image.setAttribute('crossOrigin', 'anonymous');\r\n    // When our image has loaded.\r\n    image.onload = () => {\r\n      WASM_READY() && this.drawImage(image, (flag: boolean) => {\r\n        AS_COMPLETE(as, flag);\r\n        this.STATUS.startOFF();\r\n        this.STATUS.loadingOFF();\r\n      });\r\n    };\r\n    // Set src\r\n    image.src = src;\r\n    return as;\r\n  }\r\n\r\n  /**\r\n   * torcher\r\n   * @returns \r\n   */\r\n  public torcher(): AsyncSubject<any> {\r\n    const as = this.applyConstraints({ advanced: [{ torch: this.isTorch }] });\r\n    as.subscribe(() => false, () => this.isTorch = !this.isTorch);\r\n    return as;\r\n  }\r\n\r\n  /**\r\n   * applyConstraints\r\n   * @param constraints \r\n   * @param deviceIndex \r\n   * @returns \r\n   */\r\n  public applyConstraints(constraints: MediaTrackConstraintSet | MediaTrackConstraints | any, deviceIndex = 0): AsyncSubject<any> {\r\n    const as = new AsyncSubject<any>();\r\n    if (this.isStart) {\r\n      const stream = this.video.nativeElement.srcObject as MediaStream;\r\n      if (deviceIndex !== null || deviceIndex !== undefined || !Number.isNaN(deviceIndex)) {\r\n        const videoTrack = stream.getVideoTracks()[deviceIndex] as MediaStreamTrack;\r\n        const imageCapture = new (window as any).ImageCapture(videoTrack);\r\n        imageCapture.getPhotoCapabilities().then(async () => {\r\n          await videoTrack.applyConstraints(constraints);\r\n          UPDATE_WIDTH_HEIGHT_VIDEO(this.video.nativeElement, this.canvas.nativeElement);\r\n          AS_COMPLETE(as, true);\r\n        }).catch((error: any) => {\r\n          switch (error?.name) {\r\n            case 'NotFoundError':\r\n            case 'DevicesNotFoundError':\r\n              AS_COMPLETE(as, false, 'Required track is missing' as string);\r\n              break;\r\n            case 'NotReadableError':\r\n            case 'TrackStartError':\r\n              AS_COMPLETE(as, false, 'Webcam or mic are already in use' as string);\r\n              break;\r\n            case 'OverconstrainedError':\r\n            case 'ConstraintNotSatisfiedError':\r\n              AS_COMPLETE(as, false, 'Constraints can not be satisfied by avb. devices' as string);\r\n              break;\r\n            case 'NotAllowedError':\r\n            case 'PermissionDeniedError':\r\n              AS_COMPLETE(as, false, 'Permission denied in browser' as string);\r\n              break;\r\n            case 'TypeError':\r\n              AS_COMPLETE(as, false, 'Empty constraints object' as string);\r\n              break;\r\n            default:\r\n              AS_COMPLETE(as, false, error as any);\r\n              break;\r\n          }\r\n        });\r\n      } else {\r\n        AS_COMPLETE(as, false, 'Please check again deviceIndex' as string);\r\n      }\r\n    } else {\r\n      AS_COMPLETE(as, false, 'Please start the scanner' as string);\r\n    }\r\n    return as;\r\n  };\r\n\r\n  /**\r\n   * getConstraints\r\n   * @param deviceIndex \r\n   * @returns \r\n   */\r\n  public getConstraints(deviceIndex = 0): MediaTrackConstraintSet | MediaTrackConstraints {\r\n    const stream = this.video.nativeElement.srcObject as MediaStream;\r\n    const videoTrack = stream?.getVideoTracks()[deviceIndex] as MediaStreamTrack;\r\n    return videoTrack?.getConstraints() as MediaTrackConstraints;\r\n  }\r\n\r\n  /**\r\n   * download\r\n   * @param fileName \r\n   * @param percentage \r\n   * @param quality \r\n   * @returns \r\n   */\r\n  public download(fileName: string = `ngx_scanner_qrcode_${Date.now()}.png`, percentage?: number, quality?: number): AsyncSubject<ScannerQRCodeSelectedFiles[]> {\r\n    const as = new AsyncSubject<any>();\r\n    (async () => {\r\n      const blob = await CANVAS_TO_BLOB(this.canvas.nativeElement);\r\n      const file = BLOB_TO_FILE(blob, fileName);\r\n      FILES_TO_SCAN([file], this.config, percentage, quality, as).subscribe((res: ScannerQRCodeSelectedFiles[]) => {\r\n        res.forEach((item: ScannerQRCodeSelectedFiles) => {\r\n          if (item?.data?.length) {\r\n            const link = document.createElement('a');\r\n            link.href = item.url;\r\n            link.download = item.name;\r\n            link.click();\r\n            link.remove();\r\n          }\r\n        });\r\n      });\r\n    })();\r\n    return as;\r\n  }\r\n\r\n  /**\r\n   * resize\r\n   */\r\n  private resize(): void {\r\n    window.addEventListener(\"resize\", () => {\r\n      DRAW_RESULT_APPEND_CHILD(this.dataForResize as any, this.canvas.nativeElement, this.resultsPanel.nativeElement, this.canvasStyles);\r\n      UPDATE_WIDTH_HEIGHT_VIDEO(this.video.nativeElement, this.canvas.nativeElement);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * overrideConfig\r\n   */\r\n  private overrideConfig(): void {\r\n    if ('src' in this.config) this.src = this.config.src;\r\n    if ('fps' in this.config) this.fps = this.config.fps;\r\n    if ('vibrate' in this.config) this.vibrate = this.config.vibrate;\r\n    if ('decode' in this.config) this.decode = this.config.decode;\r\n    if ('isBeep' in this.config) this.isBeep = this.config.isBeep;\r\n    if ('constraints' in this.config) this.constraints = OVERRIDES('constraints', this.config, MEDIA_STREAM_DEFAULT);\r\n    if ('canvasStyles' in this.config && this.config?.canvasStyles?.length === 2) this.canvasStyles = this.config.canvasStyles;\r\n  }\r\n\r\n  /**\r\n   * safariWebRTC\r\n   * Fix issue on safari\r\n   * https://webrtchacks.com/guide-to-safari-webrtc\r\n   * @param as \r\n   * @param playDeviceCustom \r\n   */\r\n  private safariWebRTC(as: AsyncSubject<any>, playDeviceCustom?: Function): void {\r\n    // Loading on\r\n    this.STATUS.startOFF();\r\n    this.STATUS.loadingON();\r\n    navigator.mediaDevices.getUserMedia(this.constraints).then((stream: MediaStream) => {\r\n      stream.getTracks().forEach(track => track.stop());\r\n      this.loadAllDevices(as, playDeviceCustom);\r\n    }).catch((error: any) => {\r\n      AS_COMPLETE(as, false, error);\r\n      this.STATUS.startOFF();\r\n      this.STATUS.loadingOFF();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * loadAllDevices\r\n   * @param as \r\n   * @param playDeviceCustom \r\n   */\r\n  private loadAllDevices(as: AsyncSubject<any>, playDeviceCustom?: Function): void {\r\n    navigator.mediaDevices.enumerateDevices().then(devices => {\r\n      let cameraDevices: ScannerQRCodeDevice[] = devices.filter(f => f.kind == 'videoinput');\r\n      this.devices.next(cameraDevices);\r\n      if (cameraDevices?.length > 0) {\r\n        AS_COMPLETE(as, cameraDevices);\r\n        playDeviceCustom ? playDeviceCustom(cameraDevices) : this.playDevice(cameraDevices[0].deviceId);\r\n      } else {\r\n        AS_COMPLETE(as, false, 'No camera detected.' as any);\r\n        this.STATUS.startOFF();\r\n        this.STATUS.loadingOFF();\r\n      }\r\n    }).catch((error: any) => {\r\n      AS_COMPLETE(as, false, error);\r\n      this.STATUS.startOFF();\r\n      this.STATUS.loadingOFF();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * drawImage\r\n   * @param element \r\n   * @param callback \r\n   */\r\n  private async drawImage(element: HTMLImageElement | HTMLVideoElement, callback: Function = () => { }): Promise<void> {\r\n    // Get the canvas element by using the getElementById method.\r\n    const canvas = this.canvas.nativeElement;\r\n    // Get a 2D drawing context for the canvas.\r\n    const ctx = canvas.getContext('2d', { willReadFrequently: true }) as CanvasRenderingContext2D;\r\n    // HTMLImageElement size\r\n    if (element instanceof HTMLImageElement) {\r\n      canvas.width = element.naturalWidth;\r\n      canvas.height = element.naturalHeight;\r\n      element.style.visibility = '';\r\n      this.video.nativeElement.style.visibility = 'hidden';\r\n      // Image center and auto scale\r\n      this.renderer.setStyle(this.elementRef.nativeElement, 'width', canvas.width + 'px');\r\n      this.renderer.setStyle(this.elementRef.nativeElement, 'maxWidth', 100 + '%');\r\n      this.renderer.setStyle(this.elementRef.nativeElement, 'display', 'inline-block');\r\n    }\r\n    // HTMLVideoElement size\r\n    if (element instanceof HTMLVideoElement) {\r\n      canvas.width = element.videoWidth;\r\n      canvas.height = element.videoHeight;\r\n      element.style.visibility = '';\r\n      this.canvas.nativeElement.style.visibility = 'hidden';\r\n    }\r\n    // Set width, height for video element\r\n    UPDATE_WIDTH_HEIGHT_VIDEO(this.video.nativeElement, canvas);\r\n    // clear frame\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height)\r\n    // Draw image\r\n    ctx.drawImage(element, 0, 0, canvas.width, canvas.height);\r\n    // Data image\r\n    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n    // Draw frame\r\n    const code = await zbarWasm.scanImageData(imageData);\r\n    if (code?.length) {\r\n      // Decode\r\n      code.forEach((s: any) => s.value = s.decode(this.decode?.toLocaleLowerCase()));\r\n      // Overlay\r\n      DRAW_RESULT_APPEND_CHILD(code, Object.freeze(this.canvas.nativeElement), this.resultsPanel.nativeElement, this.canvasStyles);\r\n      // To blob and emit data\r\n      const EMIT_DATA = () => {\r\n        this.eventEmit(code);\r\n        this.dataForResize = code;\r\n      };\r\n      // HTMLImageElement\r\n      if (element instanceof HTMLImageElement) {\r\n        callback(true);\r\n        EMIT_DATA();\r\n        VIBRATE(this.vibrate);\r\n        PLAY_AUDIO(this.isBeep);\r\n      }\r\n      // HTMLVideoElement\r\n      if (element instanceof HTMLVideoElement) {\r\n        EMIT_DATA();\r\n        VIBRATE(this.vibrate);\r\n        PLAY_AUDIO(this.isBeep);\r\n      }\r\n    } else {\r\n      callback(false);\r\n      REMOVE_RESULT_PANEL(this.resultsPanel.nativeElement);\r\n      this.dataForResize = [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * eventEmit\r\n   * @param response \r\n   */\r\n  private eventEmit(response: any = false): void {\r\n    (response !== false) && this.data.next(response || []);\r\n    (response !== false) && this.event.emit(response || []);\r\n  }\r\n\r\n  /**\r\n   * Single-thread\r\n   * Loop Recording on Camera\r\n   * Must be destroy request \r\n   * Not using: requestAnimationFrame\r\n   * @param delay\r\n   */\r\n  private requestAnimationFrame(delay: number = 100): void {\r\n    try {\r\n      clearTimeout(this.rAF_ID);\r\n      this.rAF_ID = setTimeout(() => {\r\n        if (this.video.nativeElement.readyState === this.video.nativeElement.HAVE_ENOUGH_DATA) {\r\n          delay = 0; // Appy first request\r\n          WASM_READY() && this.drawImage(this.video.nativeElement);\r\n          this.isStart && !this.isPause && this.requestAnimationFrame(delay);\r\n        }\r\n      }, /*avoid cache mediaStream*/ delay || this.fps);\r\n    } catch (error) {\r\n      clearTimeout(this.rAF_ID);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * isReady\r\n   */\r\n  get isReady(): AsyncSubject<boolean> {\r\n    return this.ready;\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.pause();\r\n  }\r\n}\r\n","export interface ScannerQRCodeConfig {\r\n  src?: string;\r\n  fps?: number;\r\n  vibrate?: number; /** support mobile */\r\n  decode?: string;\r\n  isBeep?: boolean;\r\n  constraints?: MediaStreamConstraints;\r\n  canvasStyles?: CanvasRenderingContext2D[] | any[];\r\n}\r\n\r\nexport interface ScannerQRCodeSelectedFiles {\r\n  url: string;\r\n  name: string;\r\n  file: File;\r\n  data?: ScannerQRCodeResult[];\r\n  canvas?: HTMLCanvasElement;\r\n}\r\n\r\nexport interface ScannerQRCodeDevice {\r\n  kind: string;\r\n  label: string;\r\n  groupId: string;\r\n  deviceId: string;\r\n}\r\n\r\nexport interface ScannerQRCodePoint {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\nexport enum ScannerQRCodeSymbolType {\r\n  ScannerQRCode_NONE = 0,   /**< no symbol decoded */\r\n  ScannerQRCode_PARTIAL = 1,   /**< intermediate status */\r\n  ScannerQRCode_EAN2 = 2,   /**< GS1 2-digit add-on */\r\n  ScannerQRCode_EAN5 = 5,   /**< GS1 5-digit add-on */\r\n  ScannerQRCode_EAN8 = 8,   /**< EAN-8 */\r\n  ScannerQRCode_UPCE = 9,   /**< UPC-E */\r\n  ScannerQRCode_ISBN10 = 10,  /**< ISBN-10 (from EAN-13). @since 0.4 */\r\n  ScannerQRCode_UPCA = 12,  /**< UPC-A */\r\n  ScannerQRCode_EAN13 = 13,  /**< EAN-13 */\r\n  ScannerQRCode_ISBN13 = 14,  /**< ISBN-13 (from EAN-13). @since 0.4 */\r\n  ScannerQRCode_COMPOSITE = 15,  /**< EAN/UPC composite */\r\n  ScannerQRCode_I25 = 25,  /**< Interleaved 2 of 5. @since 0.4 */\r\n  ScannerQRCode_DATABAR = 34,  /**< GS1 DataBar (RSS). @since 0.11 */\r\n  ScannerQRCode_DATABAR_EXP = 35,  /**< GS1 DataBar Expanded. @since 0.11 */\r\n  ScannerQRCode_CODABAR = 38,  /**< Codabar. @since 0.11 */\r\n  ScannerQRCode_CODE39 = 39,  /**< Code 39. @since 0.4 */\r\n  ScannerQRCode_PDF417 = 57,  /**< PDF417. @since 0.6 */\r\n  ScannerQRCode_QRCODE = 64,  /**< QR Code. @since 0.10 */\r\n  ScannerQRCode_SQCODE = 80,  /**< SQ Code. @since 0.20.1 */\r\n  ScannerQRCode_CODE93 = 93,  /**< Code 93. @since 0.11 */\r\n  ScannerQRCode_CODE128 = 128, /**< Code 128 */\r\n\r\n  /*\r\n   * Please see _ScannerQRCode_get_symbol_hash() if adding\r\n   * anything after 128\r\n   */\r\n\r\n  /** mask for base symbol type.\r\n   * @deprecated in 0.11, remove this from existing code\r\n   */\r\n  ScannerQRCode_SYMBOL = 0x00ff,\r\n  /** 2-digit add-on flag.\r\n   * @deprecated in 0.11, a ::ScannerQRCode_EAN2 component is used for\r\n   * 2-digit GS1 add-ons\r\n   */\r\n  ScannerQRCode_ADDON2 = 0x0200,\r\n  /** 5-digit add-on flag.\r\n   * @deprecated in 0.11, a ::ScannerQRCode_EAN5 component is used for\r\n   * 5-digit GS1 add-ons\r\n   */\r\n  ScannerQRCode_ADDON5 = 0x0500,\r\n  /** add-on flag mask.\r\n   * @deprecated in 0.11, GS1 add-ons are represented using composite\r\n   * symbols of type ::ScannerQRCode_COMPOSITE; add-on components use ::ScannerQRCode_EAN2\r\n   * or ::ScannerQRCode_EAN5\r\n   */\r\n  ScannerQRCode_ADDON = 0x0700,\r\n}\r\n\r\nexport enum ScannerQRCodeConfigType {\r\n  ScannerQRCode_CFG_ENABLE = 0,            /**< enable symbology/feature */\r\n  ScannerQRCode_CFG_ADD_CHECK,        /**< enable check digit when optional */\r\n  ScannerQRCode_CFG_EMIT_CHECK,       /**< return check digit when present */\r\n  ScannerQRCode_CFG_ASCII,            /**< enable full ASCII character set */\r\n  ScannerQRCode_CFG_BINARY,           /**< don't convert binary data to text */\r\n  ScannerQRCode_CFG_NUM,              /**< number of boolean decoder configs */\r\n\r\n  ScannerQRCode_CFG_MIN_LEN = 0x20,        /**< minimum data length for valid decode */\r\n  ScannerQRCode_CFG_MAX_LEN,        /**< maximum data length for valid decode */\r\n\r\n  ScannerQRCode_CFG_UNCERTAINTY = 0x40,    /**< required video consistency frames */\r\n\r\n  ScannerQRCode_CFG_POSITION = 0x80,       /**< enable scanner to collect position data */\r\n  ScannerQRCode_CFG_TEST_INVERTED,  /**< if fails to decode, test inverted */\r\n\r\n  ScannerQRCode_CFG_X_DENSITY = 0x100,     /**< image scanner vertical scan density */\r\n  ScannerQRCode_CFG_Y_DENSITY,     /**< image scanner horizontal scan density */\r\n}\r\n\r\nexport enum ScannerQRCodeOrientation {\r\n  ScannerQRCode_ORIENT_UNKNOWN = -1,       /**< unable to determine orientation */\r\n  ScannerQRCode_ORIENT_UP,            /**< upright, read left to right */\r\n  ScannerQRCode_ORIENT_RIGHT,         /**< sideways, read top to bottom */\r\n  ScannerQRCode_ORIENT_DOWN,          /**< upside-down, read right to left */\r\n  ScannerQRCode_ORIENT_LEFT,          /**< sideways, read bottom to top */\r\n}\r\n\r\nclass ScannerQRCodeTypePointer {\r\n  protected ptr: number;\r\n  protected ptr32: number;\r\n  protected buf: ArrayBuffer;\r\n  protected HEAP8: Int8Array;\r\n  protected HEAP32: Int32Array;\r\n  protected HEAPU32: Uint32Array;\r\n\r\n  constructor(ptr: number, buf: ArrayBuffer) {\r\n    this.ptr = ptr;\r\n    this.ptr32 = ptr >> 2;\r\n    this.buf = buf;\r\n    this.HEAP8 = new Int8Array(buf);\r\n    this.HEAPU32 = new Uint32Array(buf);\r\n    this.HEAP32 = new Int32Array(buf);\r\n  }\r\n}\r\n\r\nclass ScannerQRCodeSymbolPtr extends ScannerQRCodeTypePointer {\r\n  get type(): ScannerQRCodeSymbolType {\r\n    return this.HEAPU32[this.ptr32] as ScannerQRCodeSymbolType;\r\n  }\r\n\r\n  get data(): Int8Array {\r\n    const len = this.HEAPU32[this.ptr32 + 4];\r\n    const ptr = this.HEAPU32[this.ptr32 + 5];\r\n    return Int8Array.from(this.HEAP8.subarray(ptr, ptr + len));\r\n  }\r\n\r\n  get points(): Array<ScannerQRCodePoint> {\r\n    const len = this.HEAPU32[this.ptr32 + 7];\r\n    const ptr = this.HEAPU32[this.ptr32 + 8];\r\n    const ptr32 = ptr >> 2;\r\n    const res: ScannerQRCodePoint[] = [];\r\n    for (let i = 0; i < len; ++i) {\r\n      const x = this.HEAP32[ptr32 + i * 2];\r\n      const y = this.HEAP32[ptr32 + i * 2 + 1];\r\n      res.push({ x, y } as ScannerQRCodePoint);\r\n    }\r\n    return res;\r\n  }\r\n\r\n  get orientation(): ScannerQRCodeOrientation {\r\n    return this.HEAP32[this.ptr32 + 9];\r\n  }\r\n\r\n  get next(): ScannerQRCodeSymbolPtr | null {\r\n    const ptr = this.HEAPU32[this.ptr32 + 11];\r\n    if (!ptr) return null;\r\n    return new ScannerQRCodeSymbolPtr(ptr, this.buf);\r\n  }\r\n\r\n  get time(): number {\r\n    return this.HEAPU32[this.ptr32 + 13];\r\n  }\r\n\r\n  get cacheCount(): number {\r\n    return this.HEAP32[this.ptr32 + 14];\r\n  }\r\n\r\n  get quality(): number {\r\n    return this.HEAP32[this.ptr32 + 15];\r\n  }\r\n}\r\n\r\nclass SymbolSetPtr extends ScannerQRCodeTypePointer {\r\n  get head(): ScannerQRCodeSymbolPtr | null {\r\n    const ptr = this.HEAPU32[this.ptr32 + 2];\r\n    if (!ptr) return null;\r\n    return new ScannerQRCodeSymbolPtr(ptr, this.buf);\r\n  }\r\n}\r\n\r\nexport class ScannerQRCodeResult {\r\n  type: ScannerQRCodeSymbolType;\r\n  typeName: string;\r\n  data: Int8Array;\r\n  points: Array<ScannerQRCodePoint>;\r\n  orientation: ScannerQRCodeOrientation;\r\n  time: number;\r\n  cacheCount: number;\r\n  quality: number;\r\n  value: string = '';\r\n\r\n  private constructor(ptr: ScannerQRCodeSymbolPtr) {\r\n    this.type = ptr.type;\r\n    this.typeName = ScannerQRCodeSymbolType[this.type];\r\n    this.data = ptr.data;\r\n    this.points = ptr.points;\r\n    this.orientation = ptr.orientation;\r\n    this.time = ptr.time;\r\n    this.cacheCount = ptr.cacheCount;\r\n    this.quality = ptr.quality;\r\n  }\r\n\r\n  static createSymbolsFromPtr(ptr: number, buf: ArrayBuffer): Array<ScannerQRCodeResult> {\r\n    if (ptr == 0) return [];\r\n\r\n    const set = new SymbolSetPtr(ptr, buf);\r\n    let symbol = set.head;\r\n    const res: ScannerQRCodeResult[] = [];\r\n    while (symbol !== null) {\r\n      res.push(new ScannerQRCodeResult(symbol));\r\n      symbol = symbol.next;\r\n    }\r\n    return res;\r\n  }\r\n\r\n  decode(encoding?: string) {\r\n    const decoder = new TextDecoder(encoding);\r\n    return decoder.decode(this.data);\r\n  }\r\n}","import { NgModule } from '@angular/core';\r\nimport { NgxScannerQrcodeService } from './ngx-scanner-qrcode.service';\r\nimport { NgxScannerQrcodeComponent } from './ngx-scanner-qrcode.component';\r\n\r\n@NgModule({\r\n  declarations: [NgxScannerQrcodeComponent],\r\n  exports: [NgxScannerQrcodeComponent],\r\n  providers: [NgxScannerQrcodeService],\r\n})\r\nexport class NgxScannerQrcodeModule {}\r\n","/*\r\n * Public API Surface of ngx-scanner-qrcode\r\n */\r\n\r\nexport * from './lib/ngx-scanner-qrcode.service';\r\nexport * from './lib/ngx-scanner-qrcode.component';\r\nexport * from './lib/ngx-scanner-qrcode.options';\r\nexport * from './lib/ngx-scanner-qrcode.loader';\r\nexport * from './lib/ngx-scanner-qrcode.module';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}